{% extends '../base.html' %}

{% block main %}
<a href="/manage/article" class="btn btn-primary" role="button">add</a>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Name</th>
        <th>operation</th>
    </tr>
    </thead>
    <tbody>
    {% for e in result.rows %}
    <tr>
        <td>{{e.title}}</td>
        <td>
        <a href="/manage/article?id={{e.id}}" class="btn btn-primary" role="button">update</a>
        <a href="/api/article/{{e.id}}" class="btn btn-danger" role="button">del</a>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
<nav aria-label="Page navigation">
  <ul class="pagination">
  {{page}}
  </ul>
</nav>

{% endblock %}
{% block foot %}

<script>
   
    $(".btn-danger").on("click",function () {
        var thiz=$(this);
        $.ajax({
            type: "DELETE",
            url: this.href,
            dataType:"json",
            success:function(json){
                if(json.code="success"){
                    thiz.parent("li").remove();
                }
            }
        });
    });
</script>
{% endblock %}