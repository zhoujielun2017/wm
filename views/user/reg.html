{% extends '../empty.html' %}

{% block head %}
<style type="text/css">
    h1,.center-block{
        text-align: center;
    }
</style>
{% endblock %}

{% block main %}
<h1>{{__('website')}}</h1>
<form class="form-horizontal">
  <div class="form-group">
    <label class="col-sm-2 control-label">{{__('email')}}</label>
    <div class="col-sm-10">
      <input type="email" name="email" class="form-control" placeholder="email" required>
    </div>
  </div>
  <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">{{__('password')}}</label>
    <div class="col-sm-10">
      <input type="password" name="password" class="form-control" id="inputPassword3" placeholder="Password">
    </div>
  </div>
  <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">{{__('confirm password')}}</label>
    <div class="col-sm-10">
      <input type="password" name="password2" class="form-control" id="inputPassword3" placeholder="Password">
    </div>
  </div>
   <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">商家类型</label>
    <div class="col-sm-10">
     <select class="form-control" name="type">
        <option value="seller">零售商</option>
        <option value="agency">代理商</option>
        <option value="factory">代理商</option>
      </select>
    </div>
  </div>
    
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default">reg</button>
    </div>
  </div>
</form>
<div class="center-block">已有账号<a href="/login/login">请登录</a></div>
<p></p>
<!-- <form>
	<div><label>邮箱</label><input type="email" name="email"></div>
    <div><label>密码</label><input type="password" name="password"></div>
	<div><label>密码</label><input type="password" name="password2"></div>
	<input type="submit" value="submit">
</form> -->
<p><a href="/login/fromemail?email=11@22&pass=2222&time=1502549978197">/login/fromemail?email=11@22&pass=2222&time=1502549978197</a></p>
{% endblock %}

{% block foot %}
<script type="text/javascript">
$("form").validate({
  rules: {
    password: {
      required: true,
      minlength: 5
    },
    password2: {
      required: true,
      minlength: 5,
      equalTo: "input[name=password]"
    },
    email: {
      required: true,
      email: true
    }
  },
  messages: {
    
    password: {
      required: "Please provide a password",
      minlength: "Your password must be at least 5 characters long"
    },
    _password2: {
      required: "Please provide a password",
      minlength: "Your password must be at least 5 characters long",
      equalTo: "Please enter the same password as above"
    },
    email: "Please enter a valid email address"
  },
  errorElement: "em"

});


$("form").on("submit",function(){
  if(!$(this).valid()){
    return false;
  }
	var fd=new FormData(this);
	 $.ajax({
        type: "POST",
        url: "/login/reg",
         data:{
        	email:fd.get("email"),
        	password:fd.get("password"),
            password2:fd.get("password2"),
        },
        dataType:"json",
        success:function(json){
            if(json.code=='success'){
                location.href="/login/sendemail";
            }
        }
    });
	return false;
});
</script>  
{% endblock %}


